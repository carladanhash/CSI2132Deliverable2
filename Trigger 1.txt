Trigger 1: Preventing Customers to Cancel Booking Within 24 Hours

CREATE TRIGGER prevent_last_minute_cancellation
BEFORE UPDATE OF Status ON Booking
REFERENCING OLD ROW AS old_row NEW ROW AS new_row
FOR EACH ROW
WHEN (new_row.Status = 'Cancelled' AND TIMESTAMPDIFF(HOUR, CURRENT_TIMESTAMP, old_row.Start_Date) < 24)
BEGIN ATOMIC 
	SIGNAL SQLSTATE '45000'
	SET MESSAGE_TEXT = 'Cannot cancel booking within 24 hours of the start date.';
END;